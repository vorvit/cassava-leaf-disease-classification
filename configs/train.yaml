defaults:
  - data: cassava
  - model: efficientnet_b0
  - augment: basic
  - logger: mlflow
  - _self_

paths:
  data_dir: data/cassava
  outputs_dir: outputs

train:
  seed: 42
  epochs: 1
  batch_size: 16
  num_workers: auto
  lr: 0.0003
  weight_decay: 0.0001
  # Optional wall-clock limit for Lightning Trainer:
  # - minutes as int (e.g. 25), or
  # - "DD:HH:MM:SS" (Lightning Timer format). "HH:MM:SS" is also accepted.
  max_time: null
  imbalance:
    # none|sampler|loss_weights|both
    strategy: none
  loss:
    name: cross_entropy
    label_smoothing: 0.0
  scheduler:
    # none|cosine|plateau
    name: none
    # cosine
    t_max: ${train.epochs}
    eta_min: 0.0
    # plateau
    factor: 0.5
    patience: 1
    min_lr: 1.0e-6
    monitor: val/loss
  precision: 32
  accelerator: auto
  devices: auto
  log_every_n_steps: 10
  fast_dev_run: false
  save_checkpoints: false
  artifacts:
    # If enabled and a checkpoint exists, log it to MLflow as an artifact.
    log_checkpoint_to_mlflow: true
    # Optional: upload checkpoint to Yandex S3 (requires creds, disabled by default).
    upload_checkpoint_to_s3: false
    # Optional: upload a small JSON with callback metrics to S3 (disabled by default).
    upload_metrics_to_s3: false
    s3_bucket: mlops-cassava-project
    s3_prefix: cassava/models
    s3_endpoint_url: https://storage.yandexcloud.net
    s3_region: ru-central1

hydra:
  run:
    dir: ${paths.outputs_dir}/${now:%Y-%m-%d}/${now:%H-%M-%S}
